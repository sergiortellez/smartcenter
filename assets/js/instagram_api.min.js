function getToken(e){var t=[];fetch(e).then(function(e){return e.json()}).then(e=>{t=e.values,getInstagramEndpoint(t)})}function getInstagramEndpoint(e){const t=e[0][0],a=8,n=`https://graph.instagram.com/me/media?fields=id,caption,media_type,media_url,thumbnail_url,permalink,timestamp,thumbnail_src,is_video,location&limit=${a}&access_token=${t}`;buildData(n)}async function buildData(e){try{const a=await fetch(e),n=await a.json();if(!n.data)return void console.error("No data was returned from the API");var t=[];const i=n.data;for(const e of i){const a=e.media_type,n=e.caption;let i="";i="VIDEO"===e.media_type?e.thumbnail_url:e.media_url;const o=e.permalink,s=new Date(e.timestamp).toLocaleString("es-MX",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"});let d=[a,n,i,o,s];t.push(d)}buildNews(t)}catch(e){console.error(e)}}function buildNews(e){let t=document.querySelector("#grid-news");t.innerHTML="",e.forEach(e=>{let a=document.createElement("blockquote");a.classList.add("insta-card");let n=document.createElement("a");n.setAttribute("href",e[3]),n.setAttribute("target","_blank"),a.append(n);let i=document.createElement("img");i.setAttribute("src",e[2]),n.append(i);let o=document.createElement("p");o.innerText=e[1],n.append(o);let s=document.createElement("div");s.classList.add("data-publication");let d=document.createElement("span");d.innerText=e[4],s.append(d);let c=document.createElement("i");c.classList.add("fa-solid"),"CAROUSEL_ALBUM"===e[0]?c.classList.add("fa-rectangle-vertical-history"):"VIDEO"===e[0]?c.classList.add("fa-video"):c.classList.add("fa-image"),s.append(c),n.append(s),t.append(a)})}const URLdata="https://sheets.googleapis.com/v4/spreadsheets/12s8z3DKqUWCre_FnzjAPDZKqOwrSW6WaiQ708cdeUvM/values/token!A1?key=AIzaSyDzdEQYUcSwjzEmZNZhYd2vh1E_P6ykPAY";window.onload=function(){getToken(URLdata)};